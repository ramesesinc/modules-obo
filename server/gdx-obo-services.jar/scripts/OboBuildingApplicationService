import com.rameses.annotations.*;
import com.rameses.util.*;
import java.rmi.server.*;
import obo.facts.*;
import java.text.*;

public class OboBuildingApplicationService  {

	@DataContext("obo_building_type")
	def bldgTypeEm;
	
	@DataContext("obo_occupancy_type")
	def occTypeEm;

	@DataContext("obo_work_type")
	def workTypeEm;

	@DataContext("obo_subapplication_type")
	def itemTypeEm;

	@DataContext("obo_variable")
	def itemEm;


	@ProxyMethod
	public def getOccupancyTypes() {
		return occTypeEm.find( [type: 'group'] ).list();
	}	

	@ProxyMethod
	public def getBldgTypes(def o ) {
		return bldgTypeEm.find( [groupid: o.type] ).orderBy("title").list();
	}	

	@ProxyMethod
	public def getWorkTypes() {
		return workTypeEm.where("1=1").orderBy("idx").list();
	}

	@ProxyMethod
	public def getItemTypes() {
		return itemTypeEm.where("1=1").list();
	}

	@ProxyMethod
	public def getItems(def o) {
		def str = " typeid = :typeid ";
		def prm = [typeid: o.type];  
		return itemEm.where(str, prm).orderBy("sortorder").list();
	}



}