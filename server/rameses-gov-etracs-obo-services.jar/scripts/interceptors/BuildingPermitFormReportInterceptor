import com.rameses.annotations.*; 

class BuildingPermitEmailSenderInterceptor {
	
	@DataContext("vw_building_permit")
	def vwAppEm;

	@After(pattern="FormReportService.getData", eval="#{args[0].reportid == 'buildingpermit'}")
	public void getBuildingPermitReport( def evt ) {
		def p = evt.args[0];
		def result = evt.result;
		def id = p.parameters.objid;
		def app = vwAppEm.find( [objid: id ] ).first();
		result.data = app;
	}	
	
	@After(pattern="FormReportService.getData", eval="#{args[0].reportid == 'locationalclearance'}")
	public void getLocationalClearanceReport( def evt ) {
		def p = evt.args[0];
		def result = evt.result;
		def id = p.parameters.objid;
		def app = vwAppEm.find( [objid: id ] ).first();
		result.data = app;
	}	


}