<script type="text/javascript">
\$put("prop", new function(){
	var self = this;
	this.mode = "initial";
	this.error;
	this.selectedItem;
	this.lots = [];
	this.td = {};
	this.lots = \$get("app").code.app.lots;

	this.addLot = function(){
		if(self.td.tdno == null){
		alert("please Specify TD no.")
		}
		else if(self.td.tdno == "A"){
			self.error = "TD Not Found";
		}
		else {
			self.lots.push(self.td);
			self.td = {};
			self.error = null;
		}
	}

	this.removeLot = function(){
		self.lots.remove(self.selectedItem);
	}

	this.next = function(){
		\$get("app").code.app.lots = self.lots;
		\$get("app").navigate("appinfo");
	}


});
</script>
<br>
<br>
<legend>Project Site</legend>
<div r:context="prop" r:visibleWhen="#{error != null }">
	<label r:context="prop" style="color:red;">#{error}</label>
</div>

<br><br>


<br><br><br>
<div class="col-md-12">
	<div class="row">
	<h2>Please specify the Tax Declaration No per affected lot.</h2>
	<div r:context="prop" r:visibleWhen="#{lots.length == 0}">
		<b>Enter TD :</b> <input  type="text" r:context="prop" r:name="td.tdno" class="inputbox">
		<button r:context="prop" r:name="addLot" class="link"><i class="fa fa-plus-square-o"></i> Add Lot</button>
	</div>
<!--
<tr>
	<td>#{item.tdno}</td>
	<td><a r:context="prop" r:name="removeLot">Remove</td>
</tr>
-->

  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="row">
        <div class="col-md-12">
          <h3><b>Add Lot Details</b></h3>
        </div>
      </div>
    </div>
    <table  r:context="prop" r:items="lots" r:varName="item" r:name="selectedItem">
    	<tbody>
        <tr>
          <td>
            <div class="lotSideMenu">
              <p class="editLotItem"><a r:context="app" r:name="editLotItem" ><i class="fa fa-pencil"></i></a></p>
              <p class="showMapLotItem"><a r:context="app" ><i class="fa fa-globe"></i></a></p>
              <p class="removeLotItem"><a r:context="app" r:name="removeLotItem" ><i class="fa fa-trash"></i></a></p>
            </div>
            <div class="panel-lot panel-info lot">
                <div class="panel-body lot-body">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-4"> 
                          <p><b>Tax Dec. No. :</b></p>
                        </div>
                        <div class="col-md-8"> 
                          <p class="lot-info">#{item.tdno}</p> 
                        </div>
                      </div>                         
                    </div>

                    <div class="col-md-5">
                      <div class="row">
                        <div class="col-md-5"> 
                          <p><b>TCT No. :</b></p> 
                        </div>
                        <div class="col-md-7"> 
                          <p class="lot-info"></p>
                        </div>
                      </div>                       
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-4"> 
                          <p><b>Lot Owner :</b></p>
                        </div>
                        <div class="col-md-8"> 
                          <p class="lot-info"></p> 
                        </div>
                      </div>                         
                    </div>
                     <div class="col-md-5">
                      <div class="row">
                        <div class="col-md-5"> 
                          <p><b>Street :</b></p>
                        </div>
                        <div class="col-md-7"> 
                          <p class="lot-info"></p>
                        </div>
                      </div>                    
                    </div>
                    
                  </div>      
                  <div class="row">
                    <div class="col-md-6">
                      <div class="row">
                        <div class="col-md-4"> 
                        <p><b>Lot No. :</b></p>
                        </div>
                        <div class="col-md-8"> 
                          <p class="lot-info"></p>
                        </div>
                      </div>                    
                    </div>
                   <div  class="col-md-5">
                      <div class="row">
                        <div class="col-md-5"> 
                          <p><b>Barangay :</b></p>
                        </div>
                        <div class="col-md-7"> 
                          <p class="lot-info"></p>
                        </div>
                      </div> 
                    </div>
                  
                  </div> 
                  <div class="row">
                    <div class="col-md-6">
                    <div class="row">
                      <div class="col-md-4"> 
                        <p><b>Blk No. :</b></p>
                      </div>
                      <div class="col-md-8"> 
                        <p class="lot-info"></p>
                      </div>
                    </div>                    
                  </div>
                    
                    <div  class="col-md-5">
                      <div class="row">
                        <div class="col-md-5"> 
                          <p><b>City/Municipality:</b></p>
                        </div>
                        <div class="col-md-7"> 
                          <p class="lot-info">r</p>
                        </div>
                      </div> 
                    </div>
                  </div> 
                </div>
            </div> 
          </td> 
        </tr>
      </tbody>
    </table>                 

  </div>




	<br>
	<br>
	<div r:context="prop" r:visibleWhen="#{lots.length != 0}">
		Add TD No: <input  type="text" r:context="prop" r:name="td.tdno" class="inputbox">
		<button r:context="prop" r:name="addLot" class="link"><i class="fa fa-plus-square-o"></i> Add More Lot</button>
	</div>
	</div>
</div>
<br>
<br>

<div r:context="prop" r:visibleWhen="#{lots.length == 0}">
	<button r:context="app" r:name="_default" class="btn btn-submit btn-primary"><i class="fa fa-angle-double-left"></i>Back</button>
</div>
<div r:context="prop" r:visibleWhen="#{lots.length != 0}">
	<button r:context="app" r:name="_default" class="btn btn-submit btn-primary"><i class="fa fa-angle-double-left"></i> Back</button>
	<button r:context="prop" r:name="next" class="btn btn-submit btn-primary">Next <i class="fa fa-angle-double-right"></i></button>
</div>

<div r:context="prop" r:visibleWhen="#{mode == 'site-info'}">
<div class="col-md-12">
  <div class="row">
    <h2>Enter Lot Address</h2>
    <dl class="dl-horizontal">
          <div class="col-md-2">
            <label><b>Bldg No :</b></label> 
            <input type="text" r:context="app" r:name="app.address.bldgno" class="smallInput inputbox">
          </div>
          <div class="col-md-2">
            <label><b>Unit No :</b></label>  
            <input type="text" r:context="app" r:name="app.address.unitno" class="smallInput inputbox">
          </div>
          <div class="col-md-3">
            <label><b>Subdivision :</b></label>
            <input type="text" r:context="app" r:name="app.address.subdivision" class="inputbox">
          </div>
          <div class="col-md-3">
            <label><b>Street :</b></label>
            <input type="text" r:context="app" r:name="app.address.street" required="true" class="inputbox">
          </div>
          <div class="col-md-2">
            <label><b>Barangay :</b></label>
            <select r:context="app" r:name="app.address.barangay" r:items="barangaylist" r:itemLabel="name" class="inputbox">
        </select>
          </div>
      </dl> 
  </div>
</div>
</div>



