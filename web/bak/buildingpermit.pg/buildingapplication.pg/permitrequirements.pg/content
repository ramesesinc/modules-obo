<script>
\$put( "requirements",
   new function() {
      var self = this;

      this.callbackHandler;
      
      this.list = [];
      this.values = {};

      this.onload = function() {
        if (!self.values) self.values = {};
        //self.values = "check-architectural";
      }

    this.submit = function() {
     //if (self.callbackHandler) self.callbackHandler( self.active );
      //return "_close";
    }

    this.submit = function() {
      var permits = [];
      for (k in self.values) {
        var item = {objid: k}

        var v = self.values[k];
        if (v == "checked") {
          item.allowadd = true
        } else if (v == "unchecked") {
          item.allowremove = true;
        }
        permits.push( item );
      }

      if (self.callbackHandler) self.callbackHandler( permits );
      return "_close";

      /*
      for (var i=0; i<self.list.length; i++) {
        var x = self.list[i];
        if (x && self.active[x.objid]) {
          var item = {
            objid: x.objid,

          }
          var val = self.active[x.objid];

          if (val == "checked") {

          }
        }
      }
      */


      //if (self.callbackHandler) self.callbackHandler( self.active );
      //return "_close";
    }


      /*
	  this.submit = function() {

      var permits = [];
      for(k in this.permit){
        var v = this.permit[k];

        if(v && v != false){
          var e = {id:v};
          for (var j=0; j<self.list.length; j++) {
            var p = self.list[j];
            if (v == p.id) {
              e.title = p.title;
              e.name = p.name;
              break;
            }
          }
          permits.push(e);
        }

      }



		  if(this.callbackHandler) this.callbackHandler(permits);
		  return "_close";
	  }
    */


	  this.doClose = function(){
	  	return "_close"
	  }
   });  
</script>


<div class="form-group">

  <table r:context="requirements" r:items="list" r:varName="item">
    <tr>
      <td>
        <label><input type="checkbox" r:context="requirements" r:name="values.#{item.objid}" r:checkedValue="checked" r:uncheckedValue="unchecked" /> #{item.title}</label>
      </td>
    </tr>
  </table>

<!--
  <ul r:context="requirements" r:items="list" r:varName="item" r:varStatus="status" r:name="selectedItem">
    <li id="#{item.id}" style="list-style:none">
      <label>
        <input type="checkbox" r:context="requirements" r:name="permit.#{item.name}"  r:checkedValue="#{item.id}"/> #{item.title}
      </label>
    </li>
  </ul>
  -->


<!--
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f1"  r:checkedValue="architectural"/> Architectural
    </label><br>
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f2" r:checkedValue="structural"/> Civil/Structural
    </label><br>
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f3" r:checkedValue="plumbing"/> Plumbing
    </label><br>
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f4" r:checkedValue="electrical"/> Electrical
    </label><br>
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f5" r:checkedValue="mechaincal"/> Mechaincal
    </label><br>
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f6" r:checkedValue="sanitary"/> Sanitary
    </label><br>
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f7" r:checkedValue="electronics"/> Electronics
    </label><br>
    <label>
      <input type="checkbox" r:context="requirements" r:name="permit.f8" r:checkedValue="temporarysidewalk"/> Temporary Sidewalk
    </label>
 -->
</div>

<input type="submit" r:context="requirements" r:name="submit" value="Ok" class="btn btn-submit btn-primary"/>
<input type="button" r:context="requirements" r:name="doClose" value="Cancel" class="btn btn-submit btn-warning"/>

       	