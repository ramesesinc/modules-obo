<%if( PARAMS.error !=null) { %>
<pre>Error ${PARAMS.error?.message}</pre>
<% } %>

<script>
\$put("${PAGE.context}", 
   new function() {



    /*
      var svc = Service.lookup("CacheService", "default");
      var self = this;

      this.application = {items: []};
      this.entity = {};
      this.prcno;
      this.professional;

      this.onload = function() {
        var val = svc.get( "${PARAMS.ctcno}_bldgapp" );
        if (val != null) {
          self.entity = val.entity;
          self.application = self.application;
        }
        if (!self.entity) self.entity = {};
        if (!self.application) self.application = {};
      }

      this.submit = function() {

        var prm = {
          key: "${PARAMS.ctcno}_bldgapp",
          value: {
            entity: self.entity,
            application: self.application
          }
        }

        //window.console.log( prm );
        svc.put( prm );

        var elem = \$("#form1");
        if (elem != null) {
          elem.attr("action", "/partners/${PARAMS.name}/services/buildingpermit/buildingapplication/preapplication");
          elem.submit();
        }
      }

      this.confirmProfessional = function() {
        self.entity.professional = self.professional;
        self.professional = null;
        self.prcno = null;
        \$("#professional-result").addClass("hide");
      }

      this.searchProfessional = function() {
        var elem = \$("#professional-result");
        elem.addClass("hide");
        if (!self.prcno) return;
        self.professional = null;

        var professions = svc.get( "professions" );
        for (var i=0; i<professions.length; i++) {
          var x = professions[i];
          if (self.prcno == x.prcno) {
            if (!x.name) {
              x.name = x.lastname + ", " + x.firstname;
              if (x.middlename) x.name += " " + x.middlename;
            }
            self.professional = x;
            break;
          }
        }

        elem.removeClass("hide");

      }
      */
   }
);  

  \$(document).ready(function() {
    \$('.group_ctrl').change(function () {
        \$("." + \$(this).data("group")).prop('disabled', !this.checked);
    }).change();
});

</script>

<div class="bldgpermit-content">
    <div class="box1" >
        <div class="row">
          <div class="col-md-12">
            <label class="box-label">Lot Owner</label><b>:</b>
            <label r:context="app" r:name="data.owner.lastname"></label> , <label r:context="app" r:name="data.owner.firstname"></label><label r:context="app" r:name="data.owner.middlename"></label>
          </div>
        </div>
    </div>
    <div class="box1-1">
      <div class="row">
        <div class="col-md-12">
            <label class="box-label">Address</label><b>:</b>
            <label r:context="app" r:name="data.owner.address.text"></label>
        </div>
      </div>
    </div>
    <div class="box1-1-1">
      <h3>Location of Construction</h3> 
            <table r:context="app" r:items="data.lots" r:varName="x" width="100%">
              <tbody>
                <tr>
                  <td>
                    <div class="dataLots">
                      <div class="row">
                        <div class="col-md-3">
                          <label style="width:100px;"><b>Lot No.</b></label>
                          <label><b>:</b> #{x.address.lotno}</label> 
                        </div>
                        <div class="col-md-3">
                          <label style="width:120px;"><b>TCT No.</b></label> 
                          <label><b>:</b> #{x.tctno}</label>
                        </div>
                        <div class="col-md-3">
                          <label style="width:100px;"><b>Street</b></label> 
                          <label><b>:</b> #{x.address.street}</label>
                        </div>
                        <div class="col-md-3">
                          <label style="width:150px;"><b>Municipality/City</b></label> 
                          <label><b>:</b> #{x.address.city}</label>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-3">
                          <label style="width:100px;"><b>Blk No.</b></label> 
                          <label><b>:</b> #{x.address.blockno}</label>
                        </div>
                        <div class="col-md-3">
                          <label style="width:120px;"><b>Tax Dec. No.</b></label> 
                          <label><b>:</b> #{x.tdno}</label>
                        </div>
                        <div class="col-md-3">
                          <label style="width:100px;"><b>Barangay</b></label> 
                          <label><b>:</b> #{x.address.barangay}</label>
                        </div>
                      </div>                         
                    </div>
                  </td> 
                </tr>
              </tbody>
            </table> 
      </div>
    <div class="box1-2">
      <h3> Project Details</h3>
      <div class="col-md-12">
        <label><b>Application Type</b></label><label> : New</label>
        <div class="box1-2-1">
        <h3>Scope of Work</h3>
          <div class="row">
              <div class="col-md-6">
                  <label class="labelInput">
                    <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="NEW"> New Construction
                  </label>
                  <label class="labelInput">
                    <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="ERECTION"> Erection
                  </label>
                  <label class="labelInput">
                    <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="ADDITION"> Addition
                  </label>
                  <label class="labelInput">
                    <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="ALTERATION"> Alteration
                  </label>
                  <label class="labelInput">
                    <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="RENOVATION"> Renovation
                  </label>
                  <label class="labelInput">
                    <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="CONVERSION"> Conversion
                  </label>
              </div>
              <div class="col-md-6">
                <label class="labelInput">
                  <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set"  r:checkedValue="REPAIR"> Repair
                </label>
                <label class="labelInput">
                  <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="MOVING"> Moving
                </label>
                 <label class="labelInput">
                  <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" r:checkedValue="RAISING"> Raising
                </label>
                <label class="labelInput">
                  <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" class="group_ctrl" r:checkedValue="ACCESSORYBUILDING"> Accessory Building/Structure
                </label>
                <div class="row">
                  <div class="col-md-6 col-xs-6">
                    <label class="labelInput">
                    <input type='checkbox' r:context="app" r:name="data.scope" r:mode="set" class="group_ctrl" data-group="group_k" r:checkedValue="OTHERS"> Others
                  </label>
                  <p><input type="text" class="group_k form-control" r:context="app" r:name="data.scopeparticular"></p>
                    
                  </div>
                </div>
              </div>
          </div> 
        <h3>Occupancy Classification</h3>
        <div class="row">
          <div style="padding-bottom:30px;">
            <div class="col-md-12">
              <div class="col-md-6 row">
                <select r:context="app" r:items="classificationList" r:name="data.classification" r:itemLabel="title" r:allowNull="true" r:emptyText="Select" class="form-control form-control-custom" />
              </div>
            </div>
            <div class="col-md-6">
              <div class="control-group" style="display:none" >
                 <input type="text" r:context="app" r:name="data.occupancyuse.others" class="form-control" placeholder="Specify">
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="control-group" style="display:none" >
               <input type="text" r:context="app" r:name="data.occupancyuse.others" class="form-control" placeholder="Specify">
            </div>
          </div>
        </div>
        <h3>Use or Character of Occupancy</h3>
        <div class="col-md-12 row">
          <select r:context="app" r:items="occupancyuseList" r:name="data.occupancyuse" r:itemLabel="description" r:allowNull="true" r:emptyText="Select"  class="form-control form-control-custom" />
        </div>
        <br>
        <div class="row">
          <div style="padding-bottom:30px;">
            <div class="col-md-6">
              <div class="col-md-6 row">
                <label class="control-label"><b>Number of Units</b></label>
              </div>
              <input type="text" r:context="app" r:name="data.units" r:datatype="integer" value="1">
            </div>
            <div class="col-md-6">
              <div class="col-md-7 row">
                <label><b>Total Estimated Cost P</b></label>
              </div>
              <input type="text" placeholder="Php" r:name="data.estimatedcost" r:datatype="integer" r:context="app" format="#,##0.00">
            </div>
          </div>
        </div>
        <div class="row">
          <div style="padding-bottom:30px;">
            <div class="col-md-6">
              <div class="col-md-6 row">
                <label class="control-label"><b>Total Floor Area</b></label>
              </div>
              <input type="text" placeholder="Square Meters" r:name="data.floorarea" r:datatype="integer" r:context="app" >
            </div>
             <div class="col-md-6">
                <div class="col-md-7 row">
                  <label class="control-label"><b>Proposed Date of Construction</b></label>
                </div>
                <input type="text"  r:datatype="date" r:context="app" r:name="data.dtproposedconstruction" placeholder="Choose Date" class="rigth">
             </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6" style="float:right">
            <div class="col-md-7 row">
              <label class="control-label"><b>Expected Date of Completion</b></label>
            </div>
            <input type="text"  r:datatype="date" r:context="app" r:name="data.dtexpectedcompletion" placeholder="Choose Date" class="rigth">
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="box2">
    <h3>Full-time Inspector and Supervisor of Construction Works (REPRESENTING THE OWNER)</h3>
    @box2(title:'Architect or Civil Engineer',name: "data.supervisor", context: "app", editfunc: "editProfessional")
  </div>
</div>

 <!-- <button r:context="app" r:name="display">Display Occupancy Use</button> -->



