<script>
	\$put("app", new function() {
		var self = this;
		this.appid;
		this.orgcode = "${PARAMS.info.id}";
		this.service = Service.lookup("OnlineBuildingApplicationService", "obo");

		this.navigate = function( page, params ) {
			WindowUtil.loadHash(page, params);
		} 

		this.reload = function( params, hash ) {
			WindowUtil.load( "${PAGE.path}", params, hash );
		} 

		this.onload = function() {
			this.appid = WindowUtil.getParameter("appid");
			if(this.appid!=null && this.appid.trim().length ==0 ) {
				this.appid = null;
			}	
			if(!this.appid ){
				WindowUtil.loadHash("initial");	
			}
			else if(!window.location.hash)  {
				var s = self.service.findCurrentStep( {appid: this.appid } );
				window.location.hash = s.step;
			}
		}

	});

   \$register( {id:'initial', 		page:"${PAGE.path}/initial", 	  context: 'initial' } );
   \$register( {id:'owner',   		page:"${PAGE.path}/owner",   	  context: 'owner' } );
   \$register( {id:'professional',  page:"${PAGE.path}/professional", context: 'prof' } );
   \$register( {id:'project',  		page:"${PAGE.path}/project", context: 'project' } );
   \$register( {id:'ancillarylist',page:"${PAGE.path}/ancillarylist", context: 'ancillarylist' } );   
   \$register( {id:'ancillary',page:"${PAGE.path}/ancillary", context: 'ancillary' } );
   \$register( {id:'location',page:"${PAGE.path}/location", context: 'location' } );   
   \$register( {id:'accessories',  page:"${PAGE.path}/accessories", context: 'accessories' } );

</script>

<div style="padding:10px">
	<label>Building Application</label>
	<label r:context="app" r:visibleWhen="#{appid!=null}" >(App Tracking No: #{appid})</label> 

	<div id="content"></div>
</div>