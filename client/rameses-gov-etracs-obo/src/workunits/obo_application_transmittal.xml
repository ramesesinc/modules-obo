<workunit  extends="com/rameses/seti2/templates/FormReport.xml"> 
    <invokers>
        <!-- building permit requirement transmittal -->
        <invoker type="vw_building_permit:form:appActions" 
                caption="Build Requirement Verification"
                role="REQUIREMENT_REVIEWER"
                reportId="building_permit_transmittal"
                reportName="com/rameses/gov/etracs/obo/reports/requirement_transmittal.jasper"
                txntype="requirement"
                action="create" 
                index="0"
                visibleWhen="#{ 
                    task.state =='requirement-verification'
                    &amp;&amp; task.assignee?.objid==userInfo.userid 
                    &amp;&amp; entity.transmittalid == null 
                    &amp;&amp; entity.appno == null }"/>
                
        <invoker type="vw_building_permit:form:appActions" 
                 caption="Print Transmittal"
                 reportId="building_permit_transmittal"
                 reportName="com/rameses/gov/etracs/obo/reports/requirement_transmittal.jasper"
                 action="preview"
                 txntype="requirement"
                 visibleWhen="#{ 
                    task.state.matches('requirement.*')
                    &amp;&amp; entity.transmittalid != null  }"/>

        <!-- findings for building permit -->            
        <invoker type="vw_building_permit:form:appActions" 
                caption="Build Finding Checklist"
                role="COORDINATOR"
                reportId="building_permit_transmittal"
                reportName="com/rameses/gov/etracs/obo/reports/finding_transmittal.jasper"
                txntype="finding"
                action="create" 
                index="0"
                visibleWhen="#{ 
                    task.state.matches('zoning-verification|verification')
                    &amp;&amp; task.assignee?.objid==userInfo.userid 
                    &amp;&amp; entity.transmittalid == null }"/>
                
        <invoker type="vw_building_permit:form:appActions" 
                 caption="Print Transmittal"
                 reportId="building_permit_transmittal"
                 reportName="com/rameses/gov/etracs/obo/reports/finding_transmittal.jasper"
                 action="preview"
                 txntype="finding"
                 visibleWhen="#{ 
                    task.state.matches('zoning-verification|zoning-evaluation-revision|verification|trade-evaluation-revision')
                    &amp;&amp; entity.transmittalid != null  }"/>

        <!-- occupancy permit transmittal -->            
        <invoker type="vw_occupancy_permit:form:appActions" 
                caption="Build Requirement Verification"
                role="REQUIREMENT_REVIEWER"
                reportId="occupancy_permit_transmittal"                
                reportName="com/rameses/gov/etracs/obo/reports/requirement_transmittal.jasper"
                action="create" 
                txntype="requirement"
                index="0"
                visibleWhen="#{ 
                    task.state =='requirement-verification'
                    &amp;&amp; task.assignee?.objid==userInfo.userid 
                    &amp;&amp; entity.transmittalid == null 
                    &amp;&amp; entity.appno == null }"/>

        <invoker type="vw_occupancy_permit:form:appActions" 
                 caption="Print Transmittal"
                 reportId="occupancy_permit_transmittal"
                 reportName="com/rameses/gov/etracs/obo/reports/requirement_transmittal.jasper"
                 action="preview"
                 txntype="requirement"
                 visibleWhen="#{ 
                    task.state.matches('requirement.*')
                    &amp;&amp; entity.transmittalid != null  }"/>

       <!-- findings for occupancy permit -->             
       <invoker type="vw_occupancy_permit:form:appActions" 
                caption="Build Finding Checklist"
                role="COORDINATOR"
                reportId="occupancy_permit_transmittal"
                reportName="com/rameses/gov/etracs/obo/reports/finding_transmittal.jasper"
                txntype="finding"
                action="create" 
                index="0"
                visibleWhen="#{ 
                    task.state == 'verification'
                    &amp;&amp; task.assignee?.objid==userInfo.userid 
                    &amp;&amp; entity.transmittalid == null }"/>
                
        <invoker type="vw_occupancy_permit:form:appActions" 
                 caption="Print Transmittal"
                 reportId="occupancy_permit_transmittal"
                 reportName="com/rameses/gov/etracs/obo/reports/finding_transmittal.jasper"
                 action="preview"
                 txntype="finding"
                 visibleWhen="#{ 
                    task.state.matches('verification|inspection-revision')
                    &amp;&amp; entity.transmittalid != null  }"/>
                    
       <invoker type="formActions" caption="Send Email" action="sendEmail"/>
    </invokers>
    <code class="com.rameses.gov.etracs.obo.models.OboApplicationTransmittalModel" />
</workunit>